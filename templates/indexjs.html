<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Inicial</title>
    <link rel="stylesheet" type="text/css" href="/static/bulma.min.css">
</head>


<body class="has-background-dark">

    <div style="position: absolute; top: 0.5rem; right: 0.5rem; display: flex; align-items: right;">
        {% if login_error %}
        <p class="help is-danger is-down">{{ login_error }}</p>
        {% endif %}
        <button class="button is-success is-right" onclick="abrirModal()">Login</button>

    </div>
    <section class="hero is-dark is-fullheight">
        <div class="hero-body">
            <div class="container has-text-centered">
                <h1 class="title is-1 has-text-white">Acelere Suas Vendas Online!</h1>
                <p class="subtitle is-3 has-text-grey-light">Transforme sua presença digital e conquiste mais clientes.
                </p>
                <br>

                <div class="columns is-centered">
                    <div class="column is-half">
                        <p class="has-text-justified has-text-white-ter">
                            No mundo digital de hoje, ter um site profissional e uma forte presença no Instagram é
                            essencial para o sucesso.
                            Nós te ajudamos a criar a estratégia perfeita, desde o design do seu site até o conteúdo que
                            engaja seu público,
                            para que você possa focar no que realmente importa: o crescimento do seu negócio.
                        </p>
                    </div>
                </div>

                <br>

                <div class="columns is-centered">
                    <div class="column is-half">
                        <div class="box has-background-grey-darker has-text-white-ter">
                            <h2 class="title is-4 has-text-info">Sobre Nós</h2>
                            <p class="has-text-justified">
                                Somos uma equipe apaixonada por marketing digital e desenvolvimento web. Nossa missão é
                                impulsionar
                                negócios de todos os tamanhos, oferecendo soluções personalizadas que geram resultados
                                reais.
                                Com anos de experiência, sabemos o caminho para o sucesso online e estamos prontos para
                                guiar você.
                            </p>
                        </div>
                    </div>
                </div>

                <br>
                <button class="button is-info m-3" onclick="abrirModalComentario()">Adicionar Comentário</button>

                <div class="modal" id="modalComentario">
                    <div class="modal-background"></div>
                    <div class="modal-content">
                        <div class="box has-background-grey-darker has-text-white-ter">
                            <h2 class="title is-4 has-text-info">Adicionar Novo Comentário</h2>
                            <form id="formComentario">
                                <div class="field">
                                    <label class="label has-text-grey-light">Seu Nome</label>
                                    <div class="control">
                                        <input class="input is-dark has-text-white-ter" type="text" id="nomeComentario"
                                            placeholder="Seu nome" required>
                                    </div>
                                </div>
                                <div class="field">
                                    <label class="label has-text-grey-light">Comentário</label>
                                    <div class="control">
                                        <textarea class="textarea is-dark has-text-white-ter" id="textoComentario"
                                            placeholder="Seu comentário" required></textarea>
                                    </div>
                                </div>
                                <div class="field is-grouped">
                                    <div class="control">
                                        <button class="button is-success" type="submit">Enviar Comentário</button>
                                    </div>
                                    <div class="control">
                                        <button class="button is-light" type="button"
                                            onclick="fecharModalComentario()">Cancelar</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <button class="modal-close is-large" aria-label="close" onclick="fecharModalComentario()"></button>
                </div>

                <div class="box has-background-grey-darker">
                    <h2 class="title is-3 has-text-info">Comentários Recentes</h2>
                    <div class="box has-background-dark">
                        <p class="has-text-success">Rose Alves, Cabeleireira</p>
                        <p class="has-text-white-ter">Serviço rápido e eficiente!</p>
                    </div>
                    <div class="box has-background-dark">
                        <p class="has-text-success">Aldo Marcus, Marceneiro</p>
                        <p class="has-text-white-ter">Meu caso era complicado, mas eles resolveram</p>
                    </div>
                    {% if comentarios %}
                    {% for comentario in comentarios %}
                    <div class="box has-background-dark">
                        <p class="has-text-success">{{ comentario.autor }}</p>
                        <p class="has-text-white-ter">{{ comentario.texto }}</p>
                    </div>
                    {% endfor %}
                    {% else %}
                    <!-- <p class="has-text-white-ter">Nenhum comentário encontrado.</p> -->
                    {% endif %}
                </div>


                <div class="box has-background-grey-dark">
                    <h2 class="title is-3 has-text-success">Solicite um Orçamento</h2>
                    <form method="POST" id="adicnovo">
                        <div class="field">
                            <label class="label has-text-grey-light">Seu Nome</label>
                            <div class="control">
                                <input id="nome" class="input is-dark has-text-white-ter" type="text" name="nome"
                                    placeholder="Seu nome">
                            </div>
                        </div>

                        <div class="field">
                            <label class="label has-text-grey-light">Seu Email</label>
                            <div class="control">
                                <input id="email" class="input is-dark has-text-white-ter" type="email" name="email"
                                    placeholder="Seu email">
                            </div>
                        </div>

                        <div class="field">
                            <label class="label has-text-grey-light">Detalhes do Projeto</label>
                            <div class="control">
                                <textarea id="solicit" class="textarea is-dark has-text-white-ter" type="text"
                                    name="solicit" placeholder="Descreva como podemos te ajudar"></textarea>
                            </div>
                        </div>

                        <div class="field is-grouped">
                            <div class="control">
                                <button class="button is-success">Enviar</button>
                            </div>
                            <button class="button is-link is-light" onclick="limpar()">Limpar</button>
                        </div>
                    </form>
                </div>




                <div class="modal" id="modalLogin">
                    <div class="modal-background"></div>
                    <div class="modal-content">
                        <div class="box has-background-grey-darker has-text-white-ter">
                            <h2 class="title is-4 has-text-info">Acesso ao Painel</h2>

                            <form action="/clientes" method="POST">
                                <div class="field">
                                    <label class="label has-text-grey-light">Usuário</label>
                                    <div class="control">
                                        <input id="usern" class="input is-dark has-text-white-ter" type="text"
                                            name="username" placeholder="Seu usuário">
                                    </div>
                                </div>

                                <div class="field">
                                    <label class="label has-text-grey-light">Senha</label>
                                    <div class="control">
                                        <input id="passw" class="input is-dark has-text-white-ter" type="password"
                                            name="password" placeholder="Sua senha">
                                    </div>
                                </div>

                                <div class="field is-grouped">
                                    <div class="control">
                                        <button class="button is-success">Entrar</button>
                                    </div>
                                    <button class="button is-link is-light" onclick="fecharModal()">Cancelar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <button class="modal-close is-large" aria-label="close" onclick="fecharModal()"></button>
                </div>
            </div>
        </div>

    </section>
    <script>
        document.getElementById('adicnovo').addEventListener('submit', function (event) {
            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const solicit = document.getElementById('solicit').value;

            if (!nome || !email || !solicit) {
                alert('Por favor, preencha todos os campos.');
                event.preventDefault();
                return;
            }

        });
        function limpar() {
            document.getElementById("adicnovo").reset();
        }


        function abrir(string) {
            document.getElementById(string).classList.add('is-active');
        }
        function fechar(string) {
            document.getElementById(string).classList.remove('is-active');
        }

        function abrirModal() {
            abrir('modalLogin');
        }
        function fecharModal() {
            fechar('modalLogin');
        }

        function abrirModalComentario() {
            abrir('modalComentario');
        }

        function fecharModalComentario() {
            fechar('modalComentario');
        }

        document.getElementById('formComentario').addEventListener('submit', function (event) {
            event.preventDefault();
            enviarComentario();
        });

        async function enviarComentario() {
            const autor = document.getElementById('nomeComentario').value;
            const texto = document.getElementById('textoComentario').value;

            try {
                const response = await fetch('/api/comentarios', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ autor: autor, texto: texto })
                });

                
                const data = await response.json();

                if (response.ok) {
                    fecharModalComentario();

                    window.location.reload();
                    alert(data.mensagemok);
                } else {
                    console.error('Erro ao enviar comentário:', response.status);
                    alert(data.erro);
                }
            } catch (error) {
                console.error('Erro ao enviar comentário:', error);
                alert(data.mensagemoff)            }
        }
        async function login() {
            const username = document.getElementById('usern').value;
            const password = document.getElementById('passw').value;
            console.log(username);
            // if (input.value.trim() !== '') {
            //     const response = await fetch(`${API_URL}/clientes`, {
            //         method: 'POST',
            //         headers: {
            //             'Content-Type': 'application/json',
            //         },
            //         body: JSON.stringify({ nome: input.value }),
            //     });
            //     if (response.ok) {
            //         input.value = '';
            //         pegaClientes();
            //     }
            // }

            // fecharModal();
        }

        function fecharModal() {
            document.getElementById('modalLogin').classList.remove('is-active');
        }
    </script>

</body>

</html>